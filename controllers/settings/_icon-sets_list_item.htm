<?php //dd($this->user->hasAccess('chkilel.icones.manage_installation')); ?>

<div id="test" class="layout-cell min-height theme-thumbnail">
    <div class="thumbnail-container-flex min-height">
        <div class="icon-grid">
            <?php foreach ($iconSet->withTrashedIcons as $index => $icon): ?>

                <span style="border-left: 0px solid #e4e4e4; border-right: 0px solid #e4e4e4; display: flex; justify-content: center; justify-items: center">
                    <?= $icon->toSVG(['height' => $iconSet->display_height * 1.4]); ?>
                </span>
            <?php endforeach ?>
        </div>
    </div>
</div>


<div class="layout-cell min-height theme-description">
    <h3><?= e($iconSet->name) ?></h3>
    <?php if ($iconSet->author): ?>
        <p class="author">
            <?= trans('chkilel.icones::lang.settings.by_author', ['name' => '<a href="' . e(array_get($iconSet->author, 'url', '#')) . '" target="_blank">' . e($iconSet->author['name']) . '</a>']) ?>
        </p>
    <?php endif ?>

    <div class="scoreboard">

        <div class="scoreboard-item title-value">
            <h4 class=""><?= $iconSet->category; ?></h4>
            <p class="svg-container">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="36" height="36" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                    <path d="M18.514 2.23l3.448 3.447a2 2 0 0 1 .463 2.103l-1.763 4.812a1 1 0 0 1-.232.363l-8.323 8.323a2 2 0 0 1-2.829 0l-6.364-6.364a2 2 0 0 1 0-2.828l8.333-8.333a1 1 0 0 1 .364-.232l4.802-1.755a2 2 0 0 1 2.101.464zM15.29 8.904a1.5 1.5 0 1 0 2.12-2.122a1.5 1.5 0 0 0-2.12 2.122z" fill="#34495e" />
                </svg>
            </p>
        </div>
        <div class="scoreboard-item title-value">
            <h4 class=""><?= $iconSet->palette; ?></h4>
            <p class="svg-container">
                <?php if (strtolower($iconSet->palette) == 'colorless'): ?>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="36" height="36" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48">
                        <path fill="#8CBCD6" d="M40 41H8c-2.2 0-4-1.8-4-4V11c0-2.2 1.8-4 4-4h32c2.2 0 4 1.8 4 4v26c0 2.2-1.8 4-4 4z" />
                        <circle fill="#B3DDF5" cx="35" cy="16" r="3" />
                        <path fill="#9AC9E3" d="M20 16L9 32h22z" />
                        <path fill="#B3DDF5" d="M31 22l-8 10h16z" />
                        <circle fill="#F44336" cx="38" cy="38" r="10" />
                        <g fill="#fff">
                            <path d="M43.31 41.181l-2.12 2.122l-8.485-8.484l2.121-2.122z" />
                            <path d="M34.819 43.31l-2.122-2.12l8.484-8.485l2.122 2.121z" />
                        </g>
                    </svg>
                <?php else: ?>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="36" height="36" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48">
                        <path fill="#E65100" d="M41 42H13c-2.2 0-4-1.8-4-4V18c0-2.2 1.8-4 4-4h28c2.2 0 4 1.8 4 4v20c0 2.2-1.8 4-4 4z" />
                        <path fill="#F57C00" d="M35 36H7c-2.2 0-4-1.8-4-4V12c0-2.2 1.8-4 4-4h28c2.2 0 4 1.8 4 4v20c0 2.2-1.8 4-4 4z" />
                        <circle fill="#FFF9C4" cx="30" cy="16" r="3" />
                        <path fill="#942A09" d="M17 17.9L8 31h18z" />
                        <path fill="#BF360C" d="M28 23.5L22 31h12z" />
                    </svg>
                <?php endif ?>
            </p>
        </div>

        <?php if ($iconSet->is_installed): ?>
            <?php if ($iconSet->is_enabled): ?>
                <div class="scoreboard-item title-value success">
                    <h4 class="">Enabled</h4>
                    <p class="svg-container">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="36" height="36" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48">
                            <circle fill="#4CAF50" cx="24" cy="24" r="21" />
                            <path fill="#CCFF90" d="M34.6 14.6L21 28.2l-5.6-5.6l-2.8 2.8l8.4 8.4l16.4-16.4z" />
                        </svg>
                    </p>
                </div>
            <?php else: ?>
                <div class="scoreboard-item title-value success">
                    <h4 class="">Disabled</h4>
                    <p class="svg-container">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="36" height="36" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48">
                            <circle fill="#2196F3" cx="24" cy="24" r="21" />
                            <path fill="#fff" d="M22 22h4v11h-4z" />
                            <circle fill="#fff" cx="24" cy="16.5" r="2.5" />
                        </svg>
                    </p>
                </div>
            <?php endif; ?>

        <?php else: ?>
            <div class="scoreboard-item title-value success">
                <h4 class="">Not installed</h4>
                <p class="svg-container">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="36" height="36" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                        <path d="M14.8 4.613l6.701 11.161c.963 1.603.49 3.712-1.057 4.71a3.213 3.213 0 0 1-1.743.516H5.298C3.477 21 2 19.47 2 17.581c0-.639.173-1.264.498-1.807L9.2 4.613c.962-1.603 2.996-2.094 4.543-1.096c.428.276.79.651 1.057 1.096zM12 17a1 1 0 1 0 0-2a1 1 0 0 0 0 2zm0-9a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z" fill="#c53d2d" />
                    </svg>
                </p>
            </div>
        <?php endif; ?>

        <div class="scoreboard-item title-value">
            <h4>Total icons</h4>
            <p class="number-icon"><?= $iconSet->total; ?></p>
            <p class="description">
                <?php if ($iconSet->version): ?>
                    V<?= $iconSet->version; ?>
                <?php endif; ?>
            </p>
        </div>

        <div class="scoreboard-item title-value">
            <h4>License</h4>
            <p class="license">
                <?php if ($iconSet->license_url): ?>
                    <a href="<?= $iconSet->license_url; ?>">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" style="vertical-align: -0.125em;" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 512 512">
                            <path d="M432 320h-32a16 16 0 0 0-16 16v112H64V128h144a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16H48a48 48 0 0 0-48 48v352a48 48 0 0 0 48 48h352a48 48 0 0 0 48-48V336a16 16 0 0 0-16-16zM488 0H360c-21.37 0-32.05 25.91-17 41l35.73 35.73L135 320.37a24 24 0 0 0 0 34L157.67 377a24 24 0 0 0 34 0l243.61-243.68L471 169c15 15 41 4.5 41-17V24a24 24 0 0 0-24-24z" fill="#0f86e4" />
                        </svg>
                    </a>
                <?php endif; ?>
                <?= $iconSet->license['title']; ?>
            </p>
        </div>
    </div>


    <div class="controls">

        <?php if ($iconSet->isInstalled()): ?>

            <!--    Icon set INSTALLED   -->
            <?php if ($iconSet->isEnabled()): ?>
                <!--    Icon set ACTIVE   -->
                <button
                    type="submit"
                    data-request="onDisable"
                    data-request-data="iconSet: '<?= $iconSet->id ?>'"
                    data-stripe-load-indicator
                    class="btn btn-danger">
                    <i class="oc-icon-eye-slash"></i>
                    <?= e(trans('chkilel.icones::lang.settings.disable_button')) ?>
                </button>

                <?php if ($this->user->hasAccess('chkilel.icones.manage_installation')): ?>
                    <div class="dropdown">
                        <a data-toggle="dropdown" class="btn btn-secondary"> <i class="oc-icon-trash"></i>
                            <?= e(trans('chkilel.icones::lang.settings.delete_button')) ?>
                        </a>
                        <ul class="dropdown-menu" role="menu" data-dropdown-title="<?= e(trans('chkilel.icones::lang.settings.delete_title')) ?>">
                            <li role="presentation">
                                <div class="callout callout-warning">
                                    <div class="content">
                                        <p>
                                            <i class="oc-icon-warning"></i> <?= e(trans('chkilel.icones::lang.settings.cant_delete_enabled')) ?>
                                        </p>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                <?php endif ?>

                <!--   end Icon set ACTIVE   -->
            <?php else: ?>
                <!--    Icon set DISABLED   -->
                <button
                    type="submit"
                    data-request="onEnable"
                    data-request-data="iconSet: '<?= $iconSet->id ?>'"
                    data-stripe-load-indicator
                    class="btn btn-primary">
                    <i class="oc-icon-eye"></i>
                    <?= e(trans('chkilel.icones::lang.settings.enable_button')) ?>
                </button>
                <?php if ($this->user->hasAccess('chkilel.icones.manage_installation')): ?>
                    <button
                        type="submit"
                        data-request="onDelete"
                        data-request-confirm="<?= e(trans('chkilel.icones::lang.settings.delete_confirm')) ?>"
                        data-request-data="iconSet: '<?= $iconSet->id ?>'"
                        data-stripe-load-indicator
                        class="btn btn-primary">
                        <i class="oc-icon-trash"></i>
                        <?= e(trans('chkilel.icones::lang.settings.delete_button')) ?>
                    </button>
                <?php endif ?>
                <!--   end Icon set DISABLED   -->
            <?php endif ?>
            <!--    end Icon set INSTALLED   -->

        <?php else: ?>

            <!--    Icon set NOT YET INSTALLED   -->
            <button
                type="submit"
                data-request="onInstall"
                data-request-data="iconSet: '<?= $iconSet->id ?>'"
                data-stripe-load-indicator
                class="btn btn-success">
                <i class="oc-icon-download"></i>
                <?= e(trans('chkilel.icones::lang.settings.install_button')) ?>
            </button>
            <!--   end Icon set NOT YET INSTALLED   -->
        <?php endif ?>

    </div>
</div>
